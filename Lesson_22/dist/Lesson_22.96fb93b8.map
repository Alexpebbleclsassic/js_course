{"version":3,"sources":["location_api.js","dom.js","weather_api.js","index.js"],"names":["LocationApi","fetch","then","res","status","json","Promise","reject","my_ip","Dom","preloader","document","getElementsByClassName","locationBlock","getElementById","country","region","city","latitude","longitude","setTimeout","i","length","classList","remove","add","coordinates","innerHTML","country_name","region_name","Weather","weatherBlock","weatherIcon","weatherImg","createElement","description","temperature","maxTemp","mixTemp","humidity","pressure","winds","api_key","weatherData","iconNumber","weather","icon","path","setAttribute","appendChild","main","temp","temp_max","temp_min","wind","speed","loc","dom","btnLocation","btnWeather","addEventListener","showPreloader","getMyIp","getMyLocation","ip","setCoordinates","hidePreloader","catch","console","log","error","inputCity","value","getWeather","setWeather"],"mappings":"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","file":"Lesson_22.96fb93b8.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\n\tgetMyIp () {\n\t\treturn fetch(\"https://api.ipify.org?format=json\")\n\t\t.then(res => {\n\t\t\tif(res.status === 200){\n\t\t\t\treturn res.json();\n\t\t\t}\n\n\t\t\treturn Promise.reject(res.status);\n\t\t})\n\t}\n\n\tgetMyLocation(my_ip){\n\t\treturn fetch(`https://freegeoip.net/json/${my_ip}`)\n\t\t.then(res => {\n\t\t\tif(res.status === 200){\n\t\t\t\treturn res.json();\n\t\t\t}\n\n\t\t\treturn Promise.reject(res.status);\n\t\t})\n\t}\n}\n","export default class Dom {\n\tconstructor(){\n\t\tthis.preloader = document.getElementsByClassName(\"preloader\");\n\t\tthis.locationBlock =  document.getElementById(\"location_block\")\n\n\t\tthis.country = document.getElementById(\"country\");\n\t\tthis.region = document.getElementById(\"region\");\n\t\tthis.city = document.getElementById(\"city\");\n\t\tthis.latitude = document.getElementById(\"latitude\");\n\t\tthis.longitude = document.getElementById(\"longitude\");\n\t}\n\n\tshowPreloader() {\n\t\tsetTimeout(() => {\n\t\t\tfor (let i = 0; i < this.preloader.length; i += 1){\n\t\t\t\tthis.preloader[i].classList.remove(\"done\");\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\thidePreloader() {\n\t\tsetTimeout(() => {\n\t\t\tfor (let i = 0; i < this.preloader.length; i += 1){\n\t\t\t\tthis.preloader[i].classList.add(\"done\");\n\t\t\t}\n\t\t}, 500);\n\t}\n\n\tsetCoordinates(coordinates) {\n\t\tthis.country.innerHTML = coordinates.country_name;\n\t\tthis.region.innerHTML = coordinates.region_name;\n\t\tthis.city.innerHTML = coordinates.city;\n\t\tthis.latitude.innerHTML = coordinates.latitude;\n\t\tthis.longitude.innerHTML = coordinates.longitude;\n\n\t\tthis.locationBlock.classList.remove(\"done\");\n\t}\n}","export default class Weather {\n    constructor(){\n        this.weatherBlock = document.getElementById(\"weather_block\");\n        this.weatherIcon =  document.getElementById(\"weather_icon\");\n        this.weatherImg = document.createElement(\"img\");\n       \tthis.description =  document.getElementById(\"description\");\n\t\tthis.temperature = document.getElementById(\"temperature\");\n\t\tthis.maxTemp = document.getElementById(\"max_temp\");\n\t\tthis.mixTemp = document.getElementById(\"min_temp\");\n\t\tthis.humidity = document.getElementById(\"humidity\");\n\t\tthis.pressure = document.getElementById(\"pressure\");\n\t\tthis.winds = document.getElementById(\"wind_speed\");\n    }\n\n    getWeather(city, api_key){\n        this.city = city;\n        return fetch(`https://api.openweathermap.org/data/2.5/weather?q=${this.city}&units=metric&appid=${api_key}`)\n       \t.then(res => {\n\t\t\tif(res.status === 200){\n\t\t\t\treturn res.json();\n\t\t\t} \n            \n            return Promise.reject(res.status);\n\t\t})\n    }\n    \n    setWeather(weatherData){\n        this.weatherBlock.classList.remove(\"done\");\n        this.iconNumber = weatherData.weather[0].icon;\n        this.path = \"http://openweathermap.org/img/w/\" + this.iconNumber + \".png\";\n        this.weatherImg.setAttribute(\"src\", this.path);\n        this.weatherIcon.appendChild(this.weatherImg);\n\n        this.description.innerHTML =  weatherData.weather[0].description;\n        this.temperature.innerHTML = weatherData.main.temp + \" ºC\";\n        this.maxTemp.innerHTML = weatherData.main.temp_max + \" ºC\";\n        this.mixTemp.innerHTML = weatherData.main.temp_min + \" ºC\";\n        this.humidity.innerHTML = weatherData.main.humidity + \" %\";\n        this.pressure.innerHTML = weatherData.main.pressure + \" гПа\";\n        this.winds.innerHTML = weatherData.wind.speed + \" м/с\";\n    }\n}","import LocationApi from \"./location_api\";\nimport Dom from \"./dom\";\nimport Weather from \"./weather_api\";\n\nconst loc = new LocationApi();\nconst dom = new Dom();\nconst weather = new Weather();\n\nconst btnLocation = document.getElementById(\"location\");\nconst btnWeather = document.getElementById(\"weather\");\nconst api_key = \"6ac809cc8b65c3df15d21efbd6e9c06a\";\n\nbtnLocation.addEventListener(\"click\", () => {\n\tdom.showPreloader();\n\tloc.getMyIp()\n \t\t.then(res => loc.getMyLocation(res.ip))\n \t\t.then(res => dom.setCoordinates(res))\n\t\t.then(res => dom.hidePreloader())\n\t\t \n\t\t.catch(error => console.log(error));\n});\n\nbtnWeather.addEventListener(\"click\", () => {\n\tdom.showPreloader();\n\tconst inputCity = document.getElementById(\"input_city\");\n\tif(inputCity.value) {\n\t\tweather.getWeather(inputCity.value, api_key)\n\t\t\t.then(res => weather.setWeather(res))\n\t\t\t.then(res => dom.hidePreloader())\n\n\t\t\t.catch(error => console.log(error));\n\t} else { \n\t\tloc.getMyIp()\n\t\t\t.then(res => loc.getMyLocation(res.ip))\n\t\t\t.then(res => weather.getWeather(res.city, api_key))\n\t\t\t.then(res => weather.setWeather(res))\n\t\t\t.then(res => dom.hidePreloader())\n\n\t\t\t.catch(error => console.log(error));\n\t}\n});"]}